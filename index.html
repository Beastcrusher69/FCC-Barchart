<!DOCTYPE html>
<html lang="en">
<head>
    <title>Barchart - By Jay</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <link rel="stylesheet" href="mystyles.css"/>
</head>
<body>
    <script>

            w=1200;
            h=750;  
            padding=30;     

        const container=d3.select("body")
        .append("div")
        .attr("id","container");
        
        const title=d3.select("#container")
              .append("div")
              .attr("id","title")
              .text("United States GDP");

        const req= new XMLHttpRequest();
               req.open("GET","https://raw.githubusercontent.com/freeCodeCamp/ProjectReferenceData/master/GDP-data.json",true); 
                req.send();

                req.onload =function(){
                    const json = JSON.parse(req.responseText);
                    const dataset = json.data;

                    const yScale = d3.scaleLinear();
                    yScale.domain([d3.min(dataset,(d)=> d[1])],[d3.max(dataset,(d)=> d[1])]);
                    yScale.range([h-padding, padding]);

                    const xScale = d3.scaleLinear();
                    xScale.domain([d3.min(dataset,(d)=> d[0]),d3.min(dataset,(d)=> d[0])]);
                    xScale.range([padding,w-padding]);
                    
                    svg.selectAll("rect")
                       .data(dataset)
                       .enter()
                       .append("rect")
                       .attr("class","bar")
                       .attr("width",20)
                       .attr("data-date",(d,i) => {
                        return d[0];
                       })
                       .attr("data-gdp",(d,i) => {
                        return d[1];
                       })
                       .attr("height",(d) => {
                            return d[1]*1.3})
                       .attr("x", (d,i) => i*30 )
                       .attr("y", (d) => h-(d[1]*1.3)-padding )
                       .attr("fill","red")

                       const tooltip=d3.selectAll("rect")
                       .append("title")
                       .text((d) => d[1])
                       .attr("id","tooltip");

                       const yAxis = d3.axisLeft(yScale).ticks(5);

                       svg.append("g")
                      .attr("transform", "translate(" +  padding + ",0)")
                      .attr("id","y-axis")
                      .call(yAxis);

                      const xAxis = d3.axisBottom(xScale).ticks(5);
                      svg.append("g")
                      .attr("transform", "translate(0," + (h - padding) + ")")
                      .attr("id","x-axis")
                      .call(xAxis);

                };

        const svg=d3.select("#container")
                    .append("svg")
                    .attr("width",w)
                    .attr("height",h);

        d3.select("svg")
          .append("g")
          .text("hello")
          .attr("x",50)
          .attr("y",50)
          .attr("fill","red");

    </script>
    <script src="https://cdn.freecodecamp.org/testable-projects-fcc/v1/bundle.js"></script> 

</body>
</html>